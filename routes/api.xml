<?xml version="1.0" encoding="UTF-8" ?>
<routes as="api">
    <route-group middleware="Framework\Middleware\JsonApi" prefix="api/v1">
        <route-group  namespace="App\Portal\Controllers\Api\V1">
            <route method="all" controller="SearchController" uri="search-city" use="searchCitiesByExistingInstitutes" as="search-city"/>
            <route method="all" controller="SearchController" uri="search-institute" use="searchInstitute" as="search-institute"/>
            <route method="all" controller="SearchController" uri="search-district" use="searchDistrict" as="search-district"/>
            <route method="all" controller="SearchController" uri="search-user" use="searchUser" as="search-user" middleware="App\Middleware\AdminMiddleware"/>
            <route method="post" uri="send-message" as="portal.contact_us" controller="ContactController" use="send"/>

            <!-- Foglalt email ellenőrzés -->
            <route method="post" uri="check-email" controller="ApiUserController" use="checkEmail" as="check-email"/>

            <!-- Fiók törlése MODAL -->
            <route method="all" middleware="App\Middleware\LoggedInMiddleware" uri="profile/delete-modal" as="portal.profile.delete_modal" view="portal.partials.delete_modal"/>

            <!-- Fiók törlése -->
            <route method="post" middleware="App\Middleware\LoggedInMiddleware" uri="profile/delete" as="portal.profile.delete" controller="ApiUserController" use="delete"/>

            <!-- Közösségek API szolgáltatás -->
            <route method="all" uri="kozossegek" as="portal.kozossegek" controller="ApiGroupController" use="list"/>
        </route-group>
    </route-group>

    <route method="post" uri="preview-group-register" controller="App\Portal\Controllers\Api\V1\ApiGroupController" use="previewGroup" as="preview_group_register" prefix="api/v1"/>
</routes>
